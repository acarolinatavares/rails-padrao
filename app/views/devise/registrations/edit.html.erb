
<ol class="breadcrumb">
  <li><a href="<%= root_path%>">Principal</a></li>
  <li><a href="<%= users_path%>">Usuários</a></li>
  <li class="active">Editar conta</li>
</ol>

<%= painel_titulo("Editar Conta").html_safe %>
<div class="panel-body">
  <p><%= link_to "Cancelar minha conta", registration_path(@user), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => "label label-danger", :style => "margin-left: 930px;"%></p>
  <%= form_for @user, :as => resource_name, :url => atualiza_usuario_com_senha_users_path(@user), :html => { :method => :post, :class => 'form-vertical' } do |f| %>
      <div class="form-group">
        <%= f.label :name, "Nome*" %>
        <%= f.text_field :name, :autofocus => true,:placeholder => "Insira o nome completo"%><%= tooltip("Insira seu nome completo.").html_safe%>
      </div>

      <div class="form-group">
        <%= f.label :email,  "E-mail*", :placeholder => "Insira seu e-mail"%>
        <%= f.text_field :email%><%= tooltip("Insira seu e-mail. Obrigatório.").html_safe%>
      </div>

      <div class="form-group">
        <%= f.label :password, "Nova senha*" %>
        <%= f.password_field :password, :autocomplete => "off", :title => "Preencha somente se desejar mudar a senha", :required => false%>
      </div>

      <div class="form-group">
        <%= f.label :password_confirmation, "Repita a nova senha*" %>
        <%= f.password_field :password_confirmation, :required => false, :style => "form-control"  %>
      </div>


      <hr width="50%" align="left">
      <div class="form-group">
        <%= f.label :current_password, "Senha atual*" %>
        <%= f.password_field :current_password, :title => "Preencha somente se você alterou a senha atual",  :required => true, :style => "form-control"%><%= tooltip("Preencha somente se você alterou a senha atual").html_safe%>
      </div>

      <br>
      <div class="form-actions">
        <%= f.submit "Atualizar", :class => 'btn-primary' %>
      </div>
  <% end %>
</div>
</div>

  <script type="text/javascript">
      $( document ).ready(function() {
              //$("#edit_user").tooltipar();

      $( "#edit_user" ).validate({

          rules: {
              "user[email]": {
                  required: true,
                  email: true
              }
          },
          //O validate acabava alterando o class do input também. Isso faz com que deixe o form consistente, sem alterar
          //o fundo e borda do input
          highlight: function(element) {
              $(element).before().removeClass('error');
          },
          //Inserir o erro após o icone do tooltip
          errorPlacement: function(error, element) {
              error.insertAfter(element.next());
          }
          });

      });
  </script>